# nime

nime is Not IME.


## gaiyou (About "nime")

nimeは日本語入力用ツールです。
IMEがオフの状態でro-majidekorekore

日本語を入力するためにわざわざIMEをONにする必要がなくなるため、日本語と英語が入り混じった文章等を楽に記述することができます。

[gif] (日本語と英語の入り混じった歌詞を入力する様子)

なお、機能の実現にWebAPIを利用しているため、動作にはインターネット環境が必要となります。


## tsukaikata (How to use)

nimeを起動します。

その後、おもむろにIMEオフのまま、ローマ字で日本語を入力します。

nimeが日本語っぽいなぁと判断したタイミングから、入力されているひらがながキャレットの上部[^1]に表示されます。

その後、変換キーを押下すると、ローマ字が変換されて置き換わります。
誤変換がある場合には、続けて再度変換キーを押すと、変換結果を編集することができます。


一連のローマ字入力を認識して日本語に変換します。そのため、日本語入力のためにIMEを切り替える必要がありません。
ここで、一連のローマ字入力の終了は以下のいずれかのタイミングで検知します。

* Space押下時
* Ctrl押下時
* Alt押下時
* Enter押下時
* キャレット位置が一連のローマ字の範囲外に出た時（押下されたキーからの推測のため、実際に範囲外には出ていない場合でも）
* マウスクリック時
* アクティブなアプリケーションが切り替わった時


変換キー(キーは設定で変更することができます)の押下で変換されます。
また、 `,`あるいは`.`の入力時、入力された文章が日本語であると判定された場合にも自動で変換されます。
変換結果が誤っている場合には、続けて変換キーを押下することで、変換結果を編集できます。

[gif]

大文字で入力した個所は区切りとして認識します
`kokodeHakimonowonugu` -> ここで|はきものをぬぐ
`kokodehaKimonowonugu` -> ここでは|きものをぬぐ

[gif]

これを利用すると、ローマ字の略称が含まれる日本語を以下のように一回で変換することができます。

`nihonngowonyuuryokusurunihaIMEWoONNisimasu.` -> 日本語を入力するにはIMEをONにします。

[gif]


大文字から始まった一連の文章は変換対象外とします(設定でON/OFF)
`This`など

[gif]


変換結果がnime上で表示されない場合には、IMEを使用して当該部分だけを直接指定することもできます
この時、辞書登録も同時に行われます。

[gif]

## 変換

### 通常の入力後の変換操作

### 範囲を選択しての再変換操作

### 変換誤操作修正受付

ごくごく特定のタイミングに限ってですが、確定してしまった誤変換を修正する機会があります。

#### 変換を実施するつもりが、誤ってスペースを押下してローマ字の羅列のまま確定してしまった時。
そのスペースをバックスペースで消したタイミング、あるいは←キーでスペースの前にキャレットを移動したタイミングに限って、再変換が可能です。

[gif]

#### 変換確定後、次の文章を打ち始めた時に、前の文章の変換誤りに気付いた時
打ち始めた次の文章を構成する文字を、全てバックスペースで消したそのタイミングに限って、再変換が可能です。

[gif]



## 動作確認を行ったアプリケーション

私が主に動作確認を行っている環境は以下のような環境になります。


### 正常に動作していそう
以下のアプリケーションにおいては、正常に利用できることを確認しています。

* Microsoft Edge
* mozzila firefox
* Google Chrome

* Microsoft word
* visual studio 2022
* メモ帳(Windows10, Windows11にて確認)

### 一部問題あり
以下のアプリケーションにおいては、nimeにて予め設定を行う必要があったり、一部機能が利用できない等の制限がありますが、概ね問題なく利用することが可能です。


#### 入力表示がキャレット位置にでない
キャレット位置が判定できず、ウインドウの左上に入力表示が表示されます。日本語の入力機能自体には問題ありません。

* Inkscape
* Adobe Acrobat(編集時のみ)


#### 文字数×BSで消すように設定が必要
Shift+←の押下で文字を選択できないアプリケーションにおいてnimeを利用する場合、予めそのアプリケーションを登録しておく必要があります。
しかし、ここで登録したこのようなアプリケーションに対しては文字数分だけバックスペースを押下して削除します。

(通常、nimeでは入力した文字列を選択してから削除します。これは、編集履歴を出来るだけきれいに保つため、この方が速度が速いためです。)

文字変換時の動作が、少々もたつきます。

* Terminal
* gVim
* excel(F2での編集時は問題なし)


#### nime上での変換編集時にIMEを用いた直接編集をすることができない

* Explorer(名前変更時、検索ボックス、アドレスバー利用時、変換時にIME利用による直接指定ができない)


### 正しく動作しない
現在のバージョンでは、まともに日本語が入力されません。

* NVim(正しい文字列が入力されない)


## 利用している外部サービス

ひらがなから日本語への変換には、以下のWebAPIを利用しています。

Google CGI API for Japanese Input
[https://www.google.co.jp/ime/cgiapi.html]

> Google CGI API for Japanese Input は、日本語変換をインターネット上で実現するための、CGI サービスです。


変換時の処理判定時に英語辞書データを利用しています。これには以下のWebAPIを利用しています。

[https://excelapi.org/]
[https://excelapi.org/docs/dictionary/enja_free/]


日本語の説明に用いているAPI
https://excelapi.org/docs/dictionary/wikipedia_summary/

形態素解析


---

[^1]: 一部アプリケーションではキャレット位置を正しく判定できず、アプリケーションウインドウの左上隅に表示されます。


